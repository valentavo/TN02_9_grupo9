<!-- HEAD-->   
    <%- include('../partials/head.ejs', {title: 'Crear Producto'}) %>
    <!-- Link general css file --> 
   <link rel="stylesheet" href="/css/partials/stylePartials.css">
   <link rel="stylesheet" href="/css/products/productEditStyle.css">
</head>
<!-- HEAD-->   
<body>
<!-- HEADER--> 
   <%- include('../partials/header.ejs') %>
<!-- HEADER--> 

<!-- MAIN --> 
<section class="productEdit">
    <div class="container bg-white shadow rounded-lg px-3 mt-5 py-4 mb-5">
        <div class="row">
            <div class="col-lg-7">
                <div id="carouselExampleControlsNoTouching" class="carousel slide" data-bs-touch="false" data-bs-interval="false">
                    <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="../../img/productos/<%=  producto.image[0].nombre %>" class="d-block w-100" alt="...">
                    </div>
                    <!-- <div class="carousel-item">
                        <img src="13.png" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="14.png" class="d-block w-100" alt="...">
                    </div> -->
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                    </button>
                </div>

            </div>
            <div class="col-12 col-lg-5">
                <h3 class="productName my-2 mb-4">EDITAR PRODUCTO</h3>

                <form action="/product/edit/<%= producto.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                
                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Nombre del producto</label>
                        <input type="text" class="form-control" name='name' value="<%= producto.nombre %>">
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Imagen del producto</label>
                        <input type="file" class="form-control" name="img">
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Precio del producto</label>
                        <input type="text" class="form-control " name="price" value="<%= producto.precio %>">
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Categorias</label>
                        <select class="form-control" name="categoria" id="labels" >

                            <% categorias.forEach( row => { %>
                                <option value="<%= row.id %>" <%= categoriaProducto.id == row.id ? 'selected' : '' %>><%= row.nombre %></option>
                            <% }) %>

                        </select>
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Tama√±o del producto</label>
                        <select class="form-control" name="medida" >

                            <% medidas.forEach( row => { %>
                                <option value="<%= row.id %>" <%= medidaProducto && (medidaProducto.id == row.id) ? 'selected' : '' %>><%= row.medida %></option>
                            <% }) %>

                       </select>
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Color</label>
                        <select class="form-control" name="color">

                            <% colores.forEach( row => { %>
                                <option value="<%= row.id %>" <%= colorProducto && (colorProducto.id == row.id) ? 'selected' : '' %>><%= row.nombre %></option>
                            <% }) %>

                        </select>
                    </div>

                    <div class="form-group productLabel my-2">
                        <label class="mb-2">Marca</label>
                        <select class="form-control" name="brand">

                            <% marcas.forEach( row => { %>
                                <option value="<%= row.id %>" <%= marcaProducto.id == row.id ? 'selected' : '' %>><%= row.nombre %></option>
                            <% }) %> 

                        </select>
                    </div>
        

                    <div class="form-group productLabel my-2">
                        <label class=" mb-2">Stock disponible:</label>
                        <input type="number" class="form-control " name='stock'  value="<%= producto.cantidad %>">
                    </div>

                    <div class="col-md-12 productLabel my-2">
                        <div class="form-group">
                            <label class=" mb-2">Descripcion</label>
                            <textarea class="form-control" name="desc" rows="4"><%= producto.detalle %></textarea>
                        </div>
                    </div>

                    <div class=" my-4">
                        <button class="btn productEditBtn me-4" type="submit">Update</button>
                        <button class="btn productEditBtn" type="reset">Cancel</button>
                    </div>

                </form>
                
                <form action="/product/delete/<%= producto.id %>?_method=DELETE" method="POST" enctype="multipart/form-data">
                    <button class="btn productEditBtn" type="submit">Eliminar Producto</button>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- MAIN--> 

<!-- FOOTER --> 

    <%- include('../partials/footer.ejs') %>

<!-- FOOTER --> 